{{/*
Copyright 2014 Team 254. All Rights Reserved.
Author: pat@patfairbank.com (Patrick Fairbank)

UI for configuring event settings.
*/}}
{{define "title"}}Settings{{end}}
{{define "body"}}
<div class="row justify-content-center">
  {{if .ErrorMessage}}
  <div class="alert alert-danger alert-dismissible">
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    {{.ErrorMessage}}
  </div>
  {{end}}
  <div class="col-lg-8">
    <div class="card card-body bg-body-tertiary">
      <form method="POST">
        <ul class="nav nav-underline mb-3" id="settingsTabs" role="tablist">
          <li class="nav-item">
            <button class="nav-link" id="event-tab" data-bs-toggle="tab" data-bs-target="#event" role="tab">
              Event
            </button>
          </li>
          <li class="nav-item">
            <button class="nav-link" id="game-tab" data-bs-toggle="tab" data-bs-target="#game" type="button" role="tab">
              Game
            </button>
          </li>
          <li class="nav-item">
            <button class="nav-link" id="field-tab" data-bs-toggle="tab" data-bs-target="#field" type="button"
              role="tab">
              Field
            </button>
          </li>
          <li class="nav-item">
            <button class="nav-link" id="publishing-tab" data-bs-toggle="tab" data-bs-target="#publishing" type="button"
              role="tab">
              Publishing
            </button>
          </li>
          <li class="nav-item">
            <button class="nav-link" id="automation-tab" data-bs-toggle="tab" data-bs-target="#automation" type="button"
              role="tab">
              Automation
            </button>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane" id="event" role="tabpanel">
            <fieldset class="mb-4">
              <legend>Event Settings</legend>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Name</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="name" placeholder="{{.Name}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Playoff Type</label>
                <div class="col-lg-6">
                  <div class="radio">
                    <label>
                      <input type="radio" name="playoffType" value="DoubleEliminationPlayoff"
                        onclick="updateNumPlayoffAlliances(true);"
                        {{if eq .PlayoffType 0}}checked{{end}}>
                      Double-Elimination (3-8 alliances)
                    </label>
                  </div>
                  <div class="radio">
                    <label>
                      <input type="radio" name="playoffType" value="SingleEliminationPlayoff"
                        onclick="updateNumPlayoffAlliances(false);"
                        {{if eq .PlayoffType 1}}checked{{end}}>
                      Single-Elimination (2-16 alliances)
                    </label>
                  </div>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Number of Alliances</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="numPlayoffAlliances" value="{{.NumPlayoffAlliances}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Round 2 Selection Order</label>
                <div class="col-lg-6">
                  <div class="radio">
                    <label>
                      <input type="radio" name="selectionRound2Order" value="F"
                        {{if eq .SelectionRound2Order "F"}}checked{{end}}>
                      First to Last
                    </label>
                  </div>
                  <div class="radio">
                    <label>
                      <input type="radio" name="selectionRound2Order" value="L"
                        {{if eq .SelectionRound2Order "L"}}checked{{end}}>
                      Last to First
                    </label>
                  </div>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Round 3 Selection Order</label>
                <div class="col-lg-6">
                  <div class="radio">
                    <label>
                      <input type="radio" name="selectionRound3Order" value="F"
                        {{if eq .SelectionRound3Order "F"}}checked{{end}}>
                      First to Last
                    </label>
                  </div>
                  <div class="radio">
                    <label>
                      <input type="radio" name="selectionRound3Order" value="L"
                        {{if eq .SelectionRound3Order "L"}}checked{{end}}>
                      Last to First
                    </label>
                  </div>
                  <div class="radio">
                    <label>
                      <input type="radio" name="selectionRound3Order" value=""
                        {{if eq .SelectionRound3Order ""}}checked{{end}}>
                      None
                    </label>
                  </div>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label" for="selectionShowUnpickedTeams">
                  Show Unpicked Teams On Overlay
                </label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="selectionShowUnpickedTeams"
                    name="selectionShowUnpickedTeams" {{if .SelectionShowUnpickedTeams}} checked{{end}}>
                </div>
              </div>
            </fieldset>
            <fieldset class="mb-4">
              <legend>Team Info Download</legend>
              <div class="row mb-3">
                <label class="col-lg-6 control-label" for="tbaDownloadEnabled">
                  Enable Team Info Download (From The Blue Alliance)
                </label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="tbaDownloadEnabled"
                    name="tbaDownloadEnabled" {{if .TbaDownloadEnabled}} checked{{end}}>
                </div>
              </div>
            </fieldset>
            <fieldset class="mb-4">
              <legend>Authentication</legend>
              <p>Configure password to enable authentication, or leave blank to disable.</p>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Password for 'admin' user</label>
                <div class="col-lg-6">
                  <input type="password" class="form-control" name="adminPassword" value="{{.AdminPassword}}">
                </div>
              </div>
            </fieldset>
            <fieldset>
              <legend>Database Operations</legend>
              <div>
                <a href="/setup/db/save" class="btn btn-primary">Save Copy of Database</a>
              </div>
              <div class="mt-2">
                <button type="button" class="btn btn-warning" onclick="$('#uploadDatabase').modal('show');">
                  Load Database from Backup
                </button>
              </div>
              <div class="mt-2">
                <button type="button" class="btn btn-danger" onclick="$('#confirmClearDataPlayoff').modal('show');">
                  Clear Playoff/Alliance Data
                </button>
              </div>
              <div class="mt-2">
                <button type="button" class="btn btn-danger"
                  onclick="$('#confirmClearDataQualification').modal('show');">
                  Clear Qualification Data
                </button>
              </div>
              <div class="mt-2">
                <button type="button" class="btn btn-danger" onclick="$('#confirmClearDataPractice').modal('show');">
                  Clear Practice Data
                </button>
              </div>
            </fieldset>
          </div>
          <div class="tab-pane" id="game" role="tabpanel">
            <fieldset class="mb-4">
              <legend>Game-Specific</legend>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Autonomous Period Duration<br/>(seconds)</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="autoDurationSec" value="{{.AutoDurationSec}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Pause Duration<br/>(seconds)</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="pauseDurationSec" value="{{.PauseDurationSec}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Teleoperated Period Duration<br/>(seconds)</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teleopDurationSec" value="{{.TeleopDurationSec}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Warning Remaining Duration<br/>(seconds)</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="warningRemainingDurationSec"
                    value="{{.WarningRemainingDurationSec}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Auto Bonus RP Coral Threshold</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" id="autoBonusCoralThreshold" name="autoBonusCoralThreshold"
                    value="{{.AutoBonusCoralThreshold}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Coopertition Bonus Enabled</label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="coralBonusCoopEnabled"
                    name="coralBonusCoopEnabled" {{if .CoralBonusCoopEnabled}} checked{{end}}>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Coral Bonus RP Per-Level Threshold</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" id="coralBonusPerLevelThreshold"
                    name="coralBonusPerLevelThreshold" value="{{.CoralBonusPerLevelThreshold}}">
                </div>
              </div>
              <div class="row">
                <label class="col-lg-6 control-label">Barge Bonus RP Point Threshold</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" id="bargeBonusPointThreshold" name="bargeBonusPointThreshold"
                    value="{{.BargeBonusPointThreshold}}">
                </div>
              </div>
            </fieldset>
          </div>
          <div class="tab-pane" id="field" role="tabpanel">
            <fieldset class="mb-4">
              <legend>Networking</legend>
              <p>Enable this setting if you have a Vivid-Hosting VH-113 access point and a Layer 3 managed switch (Cisco, Aruba, HP) or a Cisco 1921 ISR
                available, for isolating each team to its own SSID and VLAN.</p>
              <div class="row mb-3">
                <label class="col-lg-8 control-label"
                  for="networkSecurityEnabled">Enable advanced network security</label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="networkSecurityEnabled"
                    name="networkSecurityEnabled" {{if .NetworkSecurityEnabled}} checked{{end}}>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">AP Address</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="apAddress" value="{{.ApAddress}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">AP API Password</label>
                <div class="col-lg-6">
                  <input type="password" class="form-control" name="apPassword" value="{{.ApPassword}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">AP Channel (6 GHz)</label>
                <div class="col-lg-6">
                  <select class="form-select" name="apChannel" value="{{.ApChannel}}">
                    {{range $i, $j := seq 29}}
                    <option value="{{(add 5 (multiply $i 8))}}"
                      {{if eq $.ApChannel (add 5 (multiply $i 8))}} selected{{end}}>
                      {{(add 5 (multiply $i 8))}}
                    </option>
                    {{end}}
                  </select>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Switch Vendor</label>
                <div class="col-lg-6">
                  <select class="form-select" name="switchVendor" id="switchVendor" value="{{.SwitchVendor}}">
                    <option value="Cisco3000" {{ if eq .EventSettings.SwitchVendor "Cisco" }}selected{{ end }}>Cisco 3000 Series Switch</option>
                    <option value="Aruba" {{ if eq .EventSettings.SwitchVendor "Aruba" }}selected{{ end }}>Aruba</option>
                    <option value="TP-Link TL-SG3210 V3" {{if eq .EventSettings.SwitchVendor "TP-Link" }}selected{{ end }}>TP-Link TL-SG3210 V3 (Future)</option>
                    <option value="HP" {{if eq .EventSettings.SwitchVendor "HP" }}selected{{ end }}>HP (Future)</option>
                    <option value="Cisco ISR" {{if eq .EventSettings.SwitchVendor "Cisco ISR" }}selected{{ end }}>Cisco 1921 ISR</option>
                  </select>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Switch Address</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="switchAddress" value="{{.SwitchAddress}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Switch Password</label>
                <div class="col-lg-6">
                  <input type="password" class="form-control" name="switchPassword" value="{{.SwitchPassword}}">
                </div>
              </div>
            </fieldset>
            <fieldset class="mb-4">
              <legend>PLC</legend>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">PLC Address</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="plcAddress" value="{{.PlcAddress}}">
                </div>
              </div>
            </fieldset>
            <fieldset class="mb-4">
                <legend>Alternate IO</legend>
              <div class="row mb-3">
                <label class="col-lg-8 control-label" for="alternateIOEnabled">
                  Enable Alternate IO (IE: Raspberry Pi)
                </label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="alternateIOEnabled"
                    name="alternateIOEnabled"{{if .AlternateIOEnabled}} checked{{end}}>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Score Table IO Address</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="ScoreTableEstopAddress" value="{{.ScoreTableEstopAddress}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Red Alliance IO Address</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="RedAllianceStationEstopAddress" value="{{.RedAllianceStationEstopAddress}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Blue Alliance IO Address</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="BlueAllianceStationEstopAddress" value="{{.BlueAllianceStationEstopAddress}}">
                </div>
              </div>
              </fieldset>
              <fieldset class="mb-4">
              <legend>Network Scanner</legend>
              <div class="row mb-3">
                <p>Optionally enable periodic network scans. Can scan all team networks and FMS network (10.0.0.0/8), Limited FMS network (172.16.100.0/24), Switch Tranist Network (10.0.0.0/24) or FMS network only (10.0.100.0/24).</p>
                <label class="col-lg-8 control-label"
                  for="networkSecurityEnabled">Enable network scans</label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="networkScannerEnabled"
                    name="networkScannerEnabled" {{if .NetworkScannerEnabled}} checked{{end}}>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Network Scanner Subnet</label>
                <div class="col-lg-6">
                  <select class="form-select" name="networkScannerSubnet" id="networkScannerSubnet" value="{{.NetworkScannerSubnet}}">
                    <option value="10.0.100.0/24" {{ if eq .EventSettings.NetworkScannerSubnet "10.0.100.0/24" }}selected{{ end }}>10.0.100.0/24</option>
                    <option value="172.16.100.0/24" {{ if eq .EventSettings.NetworkScannerSubnet "172.16.100.0/24" }}selected{{ end }}>172.16.100.0/24</option>
                    <option value="10.0.0.0/24" {{if eq .EventSettings.NetworkScannerSubnet "10.0.0.0/24" }}selected{{ end }}>10.0.0.0/24</option>
                    <option value="10.0.0.0/8" {{if eq .EventSettings.NetworkScannerSubnet "10.0.0.0/8" }}selected{{ end }}>10.0.0.0/8 (INCLUDES TEAM NETWORKS)</option>
                  </select>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Network Scanner Interval</label>
                <div class="col-lg-6">
                  <select class="form-select" name="networkScannerInterval" id="networkScannerInterval">
                    <option value="30"  {{ if eq .EventSettings.NetworkScannerInterval 30  }}selected{{ end }}>
                      30 Seconds (0.5 Minutes)
                    </option>
                    <option value="60"  {{ if eq .EventSettings.NetworkScannerInterval 60  }}selected{{ end }}>
                      60 Seconds (1 Minute)
                    </option>
                    <option value="300" {{ if eq .EventSettings.NetworkScannerInterval 300 }}selected{{ end }}>
                      300 Seconds (5 Minutes)
                    </option>
                    <option value="600" {{ if eq .EventSettings.NetworkScannerInterval 600 }}selected{{ end }}>
                      600 Seconds (10 Minutes)
                    </option>
                    <option value="900" {{ if eq .EventSettings.NetworkScannerInterval 900 }}selected{{ end }}>
                      900 Seconds (15 Minutes)
                    </option>
                    <option value="1200" {{ if eq .EventSettings.NetworkScannerInterval 1200 }}selected{{ end }}>
                      1200 Seconds (20 Minutes)
                    </option>
                  </select>
                </div>
              </div>
            </fieldset>
            <fieldset class="mb-4">
              <legend>Team Signs</legend>
              <p>
                If you are using a set of the (2024+) official team number / timer signs, enter their two-digit IDs
                (e.g.
                51, 52, etc.) here.
              </p>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Red 1 Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignRed1Id"
                    value="{{if gt .TeamSignRed1Id 0}}{{.TeamSignRed1Id}}{{end}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Red 2 Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignRed2Id"
                    value="{{if gt .TeamSignRed2Id 0}}{{.TeamSignRed2Id}}{{end}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Red 3 Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignRed3Id"
                    value="{{if gt .TeamSignRed3Id 0}}{{.TeamSignRed3Id}}{{end}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Red Timer Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignRedTimerId"
                    value="{{if gt .TeamSignRedTimerId 0}}{{.TeamSignRedTimerId}}{{end}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Blue 1 Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignBlue1Id"
                    value="{{if gt .TeamSignBlue1Id 0}}{{.TeamSignBlue1Id}}{{end}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Blue 2 Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignBlue2Id"
                    value="{{if gt .TeamSignBlue2Id 0}}{{.TeamSignBlue2Id}}{{end}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Blue 3 Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignBlue3Id"
                    value="{{if gt .TeamSignBlue3Id 0}}{{.TeamSignBlue3Id}}{{end}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Blue Timer Sign ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="teamSignBlueTimerId"
                    value="{{if gt .TeamSignBlueTimerId 0}}{{.TeamSignBlueTimerId}}{{end}}">
                </div>
              </div>
            </fieldset>
          </div>
          <div class="tab-pane" id="publishing" role="tabpanel">
            <fieldset class="mb-4">
              <legend>Publishing</legend>
              <p>Contact The Blue Alliance to obtain an event code and credentials.</p>
              <div class="row mb-3">
                <label class="col-lg-8 control-label"
                  for="tbaPublishingEnabled">Enable The Blue Alliance publishing</label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="tbaPublishingEnabled"
                    name="tbaPublishingEnabled" {{if .TbaPublishingEnabled}} checked{{end}}>
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">TBA Event Code</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="tbaEventCode" value="{{.TbaEventCode}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">TBA Auth ID</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="tbaSecretId" value="{{.TbaSecretId}}">
                </div>
              </div>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">TBA Secret</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="tbaSecret" value="{{.TbaSecret}}">
                </div>
              </div>
            </fieldset>
            <div class="col-lg-4">
              {{if .TbaPublishingEnabled}}
              <legend>Publishing Operations</legend>
              <div>
                <a href="/setup/settings/publish_teams" class="btn btn-primary">Publish Teams</a>
              </div>
              <div class="mt-2">
                <a href="/setup/settings/publish_matches" class="btn btn-primary">Publish Schedule/Results</a></div>
              <div class="mt-2">
                <a href="/setup/settings/publish_rankings" class="btn btn-primary">Publish Standings</a>
              </div>
              <div class="mt-2">
                <a href="/setup/settings/publish_alliances" class="btn btn-primary">Publish Alliances</a>
              </div>
              <div class="mt-2">
                <a href="/setup/settings/publish_awards" class="btn btn-primary">Publish Awards</a>
              </div>
              {{end}}
            </div>
          </div>
          <div class="tab-pane" id="automation" role="tabpanel">
            <fieldset class="mb-4">
              <legend>Nexus</legend>
              <p>Automatically populates practice and playoff match lineups from Nexus. Uses the same event code as TBA;
                configure it above if enabling.</p>
              <div class="row mb-3">
                <label class="col-lg-8 control-label" for="nexusEnabled">Enable pulling lineup from Nexus</label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="nexusEnabled" name="nexusEnabled" {{if .NexusEnabled}} checked{{end}}>
                </div>
              </div>
            </fieldset>
            <fieldset class="mb-4">
              <legend>Match Video Recording</legend>
              <p>
                If you are using a Blackmagic HyperDeck device to record match video, enter the device IP address(es)
                here
                to have Cheesy Arena automatically start and stop recording for each match. Separate multiple addresses
                with
                a comma.
              </p>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Blackmagic Addresses</label>
                <div class="col-lg-6">
                  <input type="text" class="form-control" name="blackmagicAddresses" value="{{.BlackmagicAddresses}}">
                </div>
              </div>
            </fieldset>
            <fieldset class="mb-4">
              <legend>Alliance Station Enhancements</legend>
              <p>Enable this setting to allow the driver station displays to flash orange to indiciate an e-stop, or solid orange
                to indiciate an a-stop. When enabled, the driver station will only flash outside of the match. <b>Display reload required for changes to take effect.</b>
              </p>
              <div class="row mb-3">
                <label class="col-lg-6 control-label">Enable DS E/A Stop Alerting</label>
                <div class="col-lg-1 checkbox">
                  <input type="checkbox" id="flashDSEnabled" name="flashDSEnabled" {{if .FlashDSEnabled}} checked{{end}}>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="row justify-content-center">
            <div class="col-lg-3 align-items-center">
              <button type="submit" class="btn btn-primary">Save All Settings</button>
            </div>
          </div>
      </form>
    </div>
  </div>
</div>
</div>
<div id="uploadDatabase" class="modal" style="top: 20%;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Choose Backup File</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
      </div>
      <form class="form-horizontal" action="/setup/db/restore" enctype="multipart/form-data" method="POST">
        <div class="modal-body">
          <p>Select the database file to load from. <b>This will overwrite any existing data.</b></p>
          <input type="file" name="databaseFile">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-danger">Load Database from Backup</button>
        </div>
      </form>
    </div>
  </div>
</div>
<div id="confirmClearDataPlayoff" class="modal" style="top: 20%;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to clear all playoff match and alliance selection data?</p>
        <p>The database will automatically be backed up.</p>
      </div>
      <div class="modal-footer">
        <form class="form-horizontal" action="/setup/db/clear/playoff" method="POST">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-danger">Clear Playoff/Alliance Data</button>
        </form>
      </div>
    </div>
  </div>
</div>
<div id="confirmClearDataQualification" class="modal" style="top: 20%;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to clear all qualification match and ranking data?</p>
        <p>The database will automatically be backed up.</p>
      </div>
      <div class="modal-footer">
        <form class="form-horizontal" action="/setup/db/clear/qualification" method="POST">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-danger">Clear Qualification Data</button>
        </form>
      </div>
    </div>
  </div>
</div>
<div id="confirmClearDataPractice" class="modal" style="top: 20%;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Confirm</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to clear all practice match data?</p>
        <p>The database will automatically be backed up.</p>
      </div>
      <div class="modal-footer">
        <form class="form-horizontal" action="/setup/db/clear/practice" method="POST">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-danger">Clear Practice Data</button>
        </form>
      </div>
    </div>
  </div>
</div>
{{end}}
{{define "script"}}
<script>
  updateNumPlayoffAlliances = function (isDoubleElimination) {
    const numPlayoffAlliances = $("input[name=numPlayoffAlliances]");
 
  };

  // Handle initial tab selection based on URL fragment.
  document.addEventListener("DOMContentLoaded", function () {
    let hash = window.location.hash;
    if (!hash) {
      hash = "#event";
    }
    const tabTrigger = document.querySelector(`[data-bs-target="${hash}"]`);
    const tab = new bootstrap.Tab(tabTrigger);
    tab.show();

    // Update the browser URL when a tab is selected.
    const tabLinks = document.querySelectorAll(`[data-bs-toggle="tab"]`);
    tabLinks.forEach(function (tabLink) {
      tabLink.addEventListener("shown.bs.tab", function (event) {
        const target = event.target.getAttribute("data-bs-target");
        if (target) {
          history.replaceState(null, "", target);
        }
      });
    });
  });
</script>
{{end}}